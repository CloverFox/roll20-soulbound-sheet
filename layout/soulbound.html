<script type="text/worker">
    on("change:body change:reflexes_1 change:reflexes_2 change:reflexes_3", function() {
        getAttrs(["body", "reflexes_1", "reflexes_2", "reflexes_3"], function(values) {
            let defence = parseInt(values.body) + parseInt(values.reflexes_1) + parseInt(values.reflexes_2) + parseInt(values.reflexes_3);
            setAttrs({def_poor:0, def_average:0, def_good:0 , def_great:0, def_superb:0, def_extraordinary:0}, {silent:true});
            if (defence === 1 || defence === 2){
                setAttrs({ def_poor:1 }, {silent:true});
            } else if (defence === 3 || defence === 4){
                setAttrs({ def_average:1 }, {silent:true});
            } else if (defence === 5 || defence === 6){
                setAttrs({ def_good:1 }, {silent:true});
            } else if (defence === 7 || defence === 8){
                setAttrs({ def_great:1 }, {silent:true});
            } else if (defence === 9 || defence === 10){
                setAttrs({ def_superb:1 }, {silent:true});
            } else if (defence === 11 || defence === 12){
                setAttrs({ def_extraordinary:1 }, {silent:true});
            }
        });
    });
    
        on("change:body change:weapon_skill_1 change:weapon_skill_2 change:weapon_skill_3", function() {
        getAttrs(["body", "weapon_skill_1", "weapon_skill_2", "weapon_skill_3"], function(values) {
            let melee = parseInt(values.body) + parseInt(values.weapon_skill_1) + parseInt(values.weapon_skill_2) + parseInt(values.weapon_skill_3);
            setAttrs({mel_poor:0, mel_average:0, mel_good:0 , mel_great:0, mel_superb:0, mel_extraordinary:0}, {silent:true});
            if (melee === 1 || melee === 2){
                setAttrs({ mel_poor:1 }, {silent:true});
            } else if (melee === 3 || melee === 4){
                setAttrs({ mel_average:1 }, {silent:true});
            } else if (melee === 5 || melee === 6){
                setAttrs({ mel_good:1 }, {silent:true});
            } else if (melee === 7 || melee === 8){
                setAttrs({ mel_great:1 }, {silent:true});
            } else if (melee === 9 || melee === 10){
                setAttrs({ mel_superb:1 }, {silent:true});
            } else if (melee === 11 || melee === 12){
                setAttrs({ mel_extraordinary:1 }, {silent:true});
            }
        });
    });

        on("change:mind change:ballistic_skill_1 change:ballistic_skill_2 change:ballistic_skill_3", function() {
        getAttrs(["mind", "ballistic_skill_1", "ballistic_skill_2", "ballistic_skill_3"], function(values) {
            let accuracy = parseInt(values.mind) + parseInt(values.ballistic_skill_1) + parseInt(values.ballistic_skill_2) + parseInt(values.ballistic_skill_3);
            setAttrs({acc_poor:0, acc_average:0, acc_good:0 , acc_great:0, acc_superb:0, acc_extraordinary:0}, {silent:true});
            if (accuracy === 1 || accuracy === 2){
                setAttrs({ acc_poor:1 }, {silent:true});
            } else if (accuracy === 3 || accuracy === 4){
                setAttrs({ acc_average:1 }, {silent:true});
            } else if (accuracy === 5 || accuracy === 6){
                setAttrs({ acc_good:1 }, {silent:true});
            } else if (accuracy === 7 || accuracy === 8){
                setAttrs({ acc_great:1 }, {silent:true});
            } else if (accuracy === 9 || accuracy === 10){
                setAttrs({ acc_superb:1 }, {silent:true});
            } else if (accuracy === 11 || accuracy === 12){
                setAttrs({ acc_extraordinary:1 }, {silent:true});
            }
        });
    });


</script>
<div class="sheet-section-character">
    <div class="sheet-img-name">
        <img src="https://i.imgur.com/NMAlvGL.jpg" class="sheet-soulbound-img"/>
        <div>
            <input type="text" name="attr_character_name">
            <span>Character Name</span>
        </div>
    </div>
    <div class="info">
        <div class="sheet-archetype">
            <input type="text" name="attr_archetype">
            <span>Archetype</span>
        </div>
        <div class="sheet-species">
            <input type="text" name="attr_species">
            <span>Species</span>
        </div>
        <div class="sheet-age">
            <input type="text" name="attr_age">
            <span>Age</span>
        </div>
        <div class="sheet-eyes">
            <input type="text" name="attr_eyes">
            <span>Eyes</span>
        </div>
        <div class="sheet-hair">
            <input type="text" name="attr_hair">
            <span>Hair</span>
        </div>
        <div class="sheet-height">
            <input type="text" name="attr_height">
            <span>Height</span>
        </div>
        <div class="sheet-weight">
            <input type="text" name="attr_weight">
            <span>Weight</span>
        </div>
        <div class="sheet-dist-features">
            <input type="text" name="attr_dist_features">
            <span>Distinguishing Features</span>
        </div>
        <div class="sheet-xp">
            <input type="text" name="attr_xp">
            <span>xp</span>
        </div>
    </div>
</div>
<div class="sheet-attributes">
    <div>
        <span>Body</span>
        <input type="number" name="attr_body" value="1">
    </div>
    <div>
        <span>Mind</span>
        <input type="number" name="attr_mind" value="1">
    </div>
    <div>
        <span>Soul</span>
        <input type="number" name="attr_soul" value="1">
    </div>
</div>
<div class="sheet-skills-list">
    <div class="sheet-skills">
        <div></div>
        <div>Training</div>
        <div>Focus</div>

        <div class="desc">
            <span>Arcana</span>
            <select class="attribute-select" name="attr_arcana_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Arcana against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{arcana_attribute}+@{arcana_1}+@{arcana_2}+@{arcana_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{arcana_focus_1} + @{arcana_focus_2} + @{arcana_focus_3}]] focus points"
                    name="roll_arcana"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_arcana_1" value="1">
            <input type="checkbox" name="attr_arcana_2" value="1">
            <input type="checkbox" name="attr_arcana_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_arcana_focus_1" value="1">
            <input type="checkbox" name="attr_arcana_focus_2" value="1">
            <input type="checkbox" name="attr_arcana_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Athletics</span>
            <select class="attribute-select" name="attr_athletics_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Athletics against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{athletics_attribute}+@{athletics_1}+@{athletics_2}+@{athletics_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{athletics_focus_1} + @{athletics_focus_2} + @{athletics_focus_3}]] focus points"
                    name="roll_athletics"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_athletics_1" value="1">
            <input type="checkbox" name="attr_athletics_2" value="1">
            <input type="checkbox" name="attr_athletics_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_athletics_focus_1" value="1">
            <input type="checkbox" name="attr_athletics_focus_2" value="1">
            <input type="checkbox" name="attr_athletics_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Awareness</span>
            <select class="attribute-select" name="attr_awareness_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Awareness against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{awareness_attribute}+@{awareness_1}+@{awareness_2}+@{awareness_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{awareness_focus_1} + @{awareness_focus_2} + @{awareness_focus_3}]] focus points"
                    name="roll_awareness"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_awareness_1" value="1">
            <input type="checkbox" name="attr_awareness_2" value="1">
            <input type="checkbox" name="attr_awareness_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_awareness_focus_1" value="1">
            <input type="checkbox" name="attr_awareness_focus_2" value="1">
            <input type="checkbox" name="attr_awareness_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Ballistic skill</span>
            <select class="attribute-select" name="attr_ballistic_skill_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Ballistic skill against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{ballistic_skill_attribute}+@{ballistic_skill_1}+@{ballistic_skill_2}+@{ballistic_skill_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{ballistic_skill_focus_1} + @{ballistic_skill_focus_2} + @{ballistic_skill_focus_3}]] focus points"
                    name="roll_ballistic_skill"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_ballistic_skill_1" value="1">
            <input type="checkbox" name="attr_ballistic_skill_2" value="1">
            <input type="checkbox" name="attr_ballistic_skill_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_ballistic_skill_focus_1" value="1">
            <input type="checkbox" name="attr_ballistic_skill_focus_2" value="1">
            <input type="checkbox" name="attr_ballistic_skill_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Beast Handling</span>
            <select class="attribute-select" name="attr_beast_handling_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Beast Handling against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{beast_handling_attribute}+@{beast_handling_1}+@{beast_handling_2}+@{beast_handling_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{beast_handling_focus_1} + @{beast_handling_focus_2} + @{beast_handling_focus_3}]] focus points"
                    name="roll_beast_handling"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_beast_handling_1" value="1">
            <input type="checkbox" name="attr_beast_handling_2" value="1">
            <input type="checkbox" name="attr_beast_handling_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_beast_handling_focus_1" value="1">
            <input type="checkbox" name="attr_beast_handling_focus_2" value="1">
            <input type="checkbox" name="attr_beast_handling_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Channelling</span>
            <select class="attribute-select" name="attr_channelling_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Channelling against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{channelling_attribute}+@{channelling_1}+@{channelling_2}+@{channelling_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{channelling_focus_1} + @{channelling_focus_2} + @{channelling_focus_3}]] focus points"
                    name="roll_channelling"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_channelling_1" value="1">
            <input type="checkbox" name="attr_channelling_2" value="1">
            <input type="checkbox" name="attr_channelling_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_channelling_focus_1" value="1">
            <input type="checkbox" name="attr_channelling_focus_2" value="1">
            <input type="checkbox" name="attr_channelling_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Crafting</span>
            <select class="attribute-select" name="attr_crafting_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Crafting against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{crafting_attribute}+@{crafting_1}+@{crafting_2}+@{crafting_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{crafting_focus_1} + @{crafting_focus_2} + @{crafting_focus_3}]] focus points"
                    name="roll_crafting"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_crafting_1" value="1">
            <input type="checkbox" name="attr_crafting_2" value="1">
            <input type="checkbox" name="attr_crafting_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_crafting_focus_1" value="1">
            <input type="checkbox" name="attr_crafting_focus_2" value="1">
            <input type="checkbox" name="attr_crafting_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Determination</span>
            <select class="attribute-select" name="attr_determination_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Determination against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{determination_attribute}+@{determination_1}+@{determination_2}+@{determination_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{determination_focus_1} + @{determination_focus_2} + @{determination_focus_3}]] focus points"
                    name="roll_determination"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_determination_1" value="1">
            <input type="checkbox" name="attr_determination_2" value="1">
            <input type="checkbox" name="attr_determination_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_determination_focus_1" value="1">
            <input type="checkbox" name="attr_determination_focus_2" value="1">
            <input type="checkbox" name="attr_determination_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Devotion</span>
            <select class="attribute-select" name="attr_devotion_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Devotion against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{devotion_attribute}+@{devotion_1}+@{devotion_2}+@{devotion_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{devotion_focus_1} + @{devotion_focus_2} + @{devotion_focus_3}]] focus points"
                    name="roll_devotion"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_devotion_1" value="1">
            <input type="checkbox" name="attr_devotion_2" value="1">
            <input type="checkbox" name="attr_devotion_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_devotion_focus_1" value="1">
            <input type="checkbox" name="attr_devotion_focus_2" value="1">
            <input type="checkbox" name="attr_devotion_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Dexterity</span>
            <select class="attribute-select" name="attr_dexterity_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Dexterity against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{dexterity_attribute}+@{dexterity_1}+@{dexterity_2}+@{dexterity_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{dexterity_focus_1} + @{dexterity_focus_2} + @{dexterity_focus_3}]] focus points"
                    name="roll_dexterity"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_dexterity_1" value="1">
            <input type="checkbox" name="attr_dexterity_2" value="1">
            <input type="checkbox" name="attr_dexterity_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_dexterity_focus_1" value="1">
            <input type="checkbox" name="attr_dexterity_focus_2" value="1">
            <input type="checkbox" name="attr_dexterity_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Entertain</span>
            <select class="attribute-select" name="attr_entertain_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Entertain against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{entertain_attribute}+@{entertain_1}+@{entertain_2}+@{entertain_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{entertain_focus_1} + @{entertain_focus_2} + @{entertain_focus_3}]] focus points"
                    name="roll_entertain"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_entertain_1" value="1">
            <input type="checkbox" name="attr_entertain_2" value="1">
            <input type="checkbox" name="attr_entertain_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_entertain_focus_1" value="1">
            <input type="checkbox" name="attr_entertain_focus_2" value="1">
            <input type="checkbox" name="attr_entertain_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Fortitude</span>
            <select class="attribute-select" name="attr_fortitude_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Fortitude against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{fortitude_attribute}+@{fortitude_1}+@{fortitude_2}+@{fortitude_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{fortitude_focus_1} + @{fortitude_focus_2} + @{fortitude_focus_3}]] focus points"
                    name="roll_fortitude"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_fortitude_1" value="1">
            <input type="checkbox" name="attr_fortitude_2" value="1">
            <input type="checkbox" name="attr_fortitude_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_fortitude_focus_1" value="1">
            <input type="checkbox" name="attr_fortitude_focus_2" value="1">
            <input type="checkbox" name="attr_fortitude_focus_3" value="1">
        </div>

    </div>
    <div class="skills">
        <div></div>
        <div>Training</div>
        <div>Focus</div>

        <div class="desc">
            <span>Guile</span>
            <select class="attribute-select" name="attr_guile_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Guile against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{guile_attribute}+@{guile_1}+@{guile_2}+@{guile_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{guile_focus_1} + @{guile_focus_2} + @{guile_focus_3}]] focus points"
                    name="roll_guile"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_guile_1" value="1">
            <input type="checkbox" name="attr_guile_2" value="1">
            <input type="checkbox" name="attr_guile_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_guile_focus_1" value="1">
            <input type="checkbox" name="attr_guile_focus_2" value="1">
            <input type="checkbox" name="attr_guile_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Intimidation</span>
            <select class="attribute-select" name="attr_intimidation_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Intimidation against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{intimidation_attribute}+@{intimidation_1}+@{intimidation_2}+@{intimidation_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{intimidation_focus_1} + @{intimidation_focus_2} + @{intimidation_focus_3}]] focus points"
                    name="roll_intimidation"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_intimidation_1" value="1">
            <input type="checkbox" name="attr_intimidation_2" value="1">
            <input type="checkbox" name="attr_intimidation_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_intimidation_focus_1" value="1">
            <input type="checkbox" name="attr_intimidation_focus_2" value="1">
            <input type="checkbox" name="attr_intimidation_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Intuition</span>
            <select class="attribute-select" name="attr_intuition_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Intuition against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{intuition_attribute}+@{intuition_1}+@{intuition_2}+@{intuition_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{intuition_focus_1} + @{intuition_focus_2} + @{intuition_focus_3}]] focus points"
                    name="roll_intuition"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_intuition_1" value="1">
            <input type="checkbox" name="attr_intuition_2" value="1">
            <input type="checkbox" name="attr_intuition_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_intuition_focus_1" value="1">
            <input type="checkbox" name="attr_intuition_focus_2" value="1">
            <input type="checkbox" name="attr_intuition_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Lore</span>
            <select class="attribute-select" name="attr_lore_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Lore against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{lore_attribute}+@{lore_1}+@{lore_2}+@{lore_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{lore_focus_1} + @{lore_focus_2} + @{lore_focus_3}]] focus points"
                    name="roll_lore"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_lore_1" value="1">
            <input type="checkbox" name="attr_lore_2" value="1">
            <input type="checkbox" name="attr_lore_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_lore_focus_1" value="1">
            <input type="checkbox" name="attr_lore_focus_2" value="1">
            <input type="checkbox" name="attr_lore_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Medicine</span>
            <select class="attribute-select" name="attr_medicine_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Medicine against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{medicine_attribute}+@{medicine_1}+@{medicine_2}+@{medicine_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{medicine_focus_1} + @{medicine_focus_2} + @{medicine_focus_3}]] focus points"
                    name="roll_medicine"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_medicine_1" value="1">
            <input type="checkbox" name="attr_medicine_2" value="1">
            <input type="checkbox" name="attr_medicine_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_medicine_focus_1" value="1">
            <input type="checkbox" name="attr_medicine_focus_2" value="1">
            <input type="checkbox" name="attr_medicine_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Might</span>
            <select class="attribute-select" name="attr_might_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Might against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{might_attribute}+@{might_1}+@{might_2}+@{might_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{might_focus_1} + @{might_focus_2} + @{might_focus_3}]] focus points"
                    name="roll_might"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_might_1" value="1">
            <input type="checkbox" name="attr_might_2" value="1">
            <input type="checkbox" name="attr_might_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_might_focus_1" value="1">
            <input type="checkbox" name="attr_might_focus_2" value="1">
            <input type="checkbox" name="attr_might_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Nature</span>
            <select class="attribute-select" name="attr_nature_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Nature against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{nature_attribute}+@{nature_1}+@{nature_2}+@{nature_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{nature_focus_1} + @{nature_focus_2} + @{nature_focus_3}]] focus points"
                    name="roll_nature"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_nature_1" value="1">
            <input type="checkbox" name="attr_nature_2" value="1">
            <input type="checkbox" name="attr_nature_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_nature_focus_1" value="1">
            <input type="checkbox" name="attr_nature_focus_2" value="1">
            <input type="checkbox" name="attr_nature_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Reflexes</span>
            <select class="attribute-select" name="attr_reflexes_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Reflexes against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{reflexes_attribute}+@{reflexes_1}+@{reflexes_2}+@{reflexes_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{reflexes_focus_1} + @{reflexes_focus_2} + @{reflexes_focus_3}]] focus points"
                    name="roll_reflexes"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_reflexes_1" value="1">
            <input type="checkbox" name="attr_reflexes_2" value="1">
            <input type="checkbox" name="attr_reflexes_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_reflexes_focus_1" value="1">
            <input type="checkbox" name="attr_reflexes_focus_2" value="1">
            <input type="checkbox" name="attr_reflexes_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Stealth</span>
            <select class="attribute-select" name="attr_stealth_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Stealth against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{stealth_attribute}+@{stealth_1}+@{stealth_2}+@{stealth_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{stealth_focus_1} + @{stealth_focus_2} + @{stealth_focus_3}]] focus points"
                    name="roll_stealth"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_stealth_1" value="1">
            <input type="checkbox" name="attr_stealth_2" value="1">
            <input type="checkbox" name="attr_stealth_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_stealth_focus_1" value="1">
            <input type="checkbox" name="attr_stealth_focus_2" value="1">
            <input type="checkbox" name="attr_stealth_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Survival</span>
            <select class="attribute-select" name="attr_survival_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Survival against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{survival_attribute}+@{survival_1}+@{survival_2}+@{survival_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{survival_focus_1} + @{survival_focus_2} + @{survival_focus_3}]] focus points"
                    name="roll_survival"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_survival_1" value="1">
            <input type="checkbox" name="attr_survival_2" value="1">
            <input type="checkbox" name="attr_survival_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_survival_focus_1" value="1">
            <input type="checkbox" name="attr_survival_focus_2" value="1">
            <input type="checkbox" name="attr_survival_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Theology</span>
            <select class="attribute-select" name="attr_theology_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Theology against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{theology_attribute}+@{theology_1}+@{theology_2}+@{theology_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{theology_focus_1} + @{theology_focus_2} + @{theology_focus_3}]] focus points"
                    name="roll_theology"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_theology_1" value="1">
            <input type="checkbox" name="attr_theology_2" value="1">
            <input type="checkbox" name="attr_theology_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_theology_focus_1" value="1">
            <input type="checkbox" name="attr_theology_focus_2" value="1">
            <input type="checkbox" name="attr_theology_focus_3" value="1">
        </div>

        <div class="desc">
            <span>Weapon Skill</span>
            <select class="attribute-select" name="attr_weapon_skill_attribute">
                <option value="@{body}" selected="selected">body</option>
                <option value="@{mind}">mind</option>
                <option value="@{soul}">soul</option>
            </select>
            <button type="roll"
                    value="@{character_name} uses Weapon Skill against DN ?{Target DN? |1|2|3|4|5|6}: [[(@{weapon_skill_attribute}+@{weapon_skill_1}+@{weapon_skill_2}+@{weapon_skill_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{weapon_skill_focus_1} + @{weapon_skill_focus_2} + @{weapon_skill_focus_3}]] focus points"
                    name="roll_weapon_skill"></button>
        </div>
        <div class="training">
            <input type="checkbox" name="attr_weapon_skill_1" value="1">
            <input type="checkbox" name="attr_weapon_skill_2" value="1">
            <input type="checkbox" name="attr_weapon_skill_3" value="1">
        </div>
        <div class="focus">
            <input type="checkbox" name="attr_weapon_skill_focus_1" value="1">
            <input type="checkbox" name="attr_weapon_skill_focus_2" value="1">
            <input type="checkbox" name="attr_weapon_skill_focus_3" value="1">
        </div>
    </div>
</div>

<input type="hidden" name="attr_melee"
       value="ceil((@{body}+@{weapon_skill_1}+@{weapon_skill_2}+@{weapon_skill_3})/2)" disabled="true">
<input type="hidden" name="attr_accuracy"
       value="ceil((@{mind}+@{ballistic_skill_1}+@{ballistic_skill_2}+@{ballistic_skill_3})/2)" disabled="true">
<input type="hidden" name="attr_defence" value="ceil((@{body}+@{reflexes_1}+@{reflexes_2}+@{reflexes_3})/2)"
       disabled="true">

<div class="sheet-combat-abilities">
    <div></div>
    <div>mel</div>
    <div>acc</div>
    <div>def</div>

    <span>extraordinary</span>
    <input type="checkbox" name="attr_mel_extraordinary" value="1">
    <input type="checkbox" name="attr_acc_extraordinary" value="1">
    <input type="checkbox" name="attr_def_extraordinary" value="1">

    <span>superb</span>
    <input type="checkbox" name="attr_mel_superb" value="1">
    <input type="checkbox" name="attr_acc_superb" value="1">
    <input type="checkbox" name="attr_def_superb" value="1">

    <span>great</span>
    <input type="checkbox" name="attr_mel_great" value="1">
    <input type="checkbox" name="attr_acc_great" value="1">
    <input type="checkbox" name="attr_def_great" value="1">

    <span>good</span>
    <input type="checkbox" name="attr_mel_good" value="1">
    <input type="checkbox" name="attr_acc_good" value="1">
    <input type="checkbox" name="attr_def_good" value="1">

    <span>average</span>
    <input type="checkbox" name="attr_mel_average" value="1">
    <input type="checkbox" name="attr_acc_average" value="1">
    <input type="checkbox" name="attr_def_average" value="1">

    <span>poor</span>
    <input type="checkbox" name="attr_mel_poor" value="1">
    <input type="checkbox" name="attr_acc_poor" value="1">
    <input type="checkbox" name="attr_def_poor" value="1">
</div>

<div>
    <span>Toughness</span>
    <input type="number" disabled="true" name="attr_toughness" value="@{body} + @{mind} + @{soul}">
</div>
<div>
    <span>Wounds</span>
    <input type="number" name="attr_wounds">/
    <input type="number" disabled="true" name="attr_wounds_max" value="ceil((@{body} + @{mind} + @{soul})/2)">
    <span>Mortally Wounded</span>
    <input type="checkbox" name="attr_mortally_wounded" value="1">
</div>
<div>
    <span>Initiative</span>
    <input type="number" disabled="true" name="attr_initiative"
           value="@{mind} + @{awareness_1} + @{awareness_2} + @{awareness_3} + @{reflexes_1} + @{reflexes_2} + @{reflexes_3}">
</div>
<div>
    <span>Natural Awareness</span>
    <input type="number" disabled="true" name="attr_nat_awareness"
           value="ceil((@{mind} + @{awareness_1} + @{awareness_2} + @{awareness_3})/2)">
</div>
<div>
    <span>Mettle</span>
    <input type="number" disabled="true" name="attr_mettle_max" value="ceil(@{soul}/2)">
</div>
<div class="sheet-currency">
    <div>
        <span>Drops</span>
        <input type="number" name="attr_drops" value="0">
    </div>
    <div>
        <span>Phials</span>
        <input type="number" name="attr_phials" value="0">
    </div>
    <div>
        <span>Spheres</span>
        <input type="number" name="attr_spheres" value="0">
    </div>
</div>
<div class="sheet-weapons">
    <div>weapon name</div>
    <div>attack</div>
    <div>pool</div>
    <div>focus</div>
    <div>damage</div>
    <div>traits</div>
</div>
<div>Melee Weapons</div>
<fieldset class="repeating_melee">
    <div class="sheet-weapons">
        <input type="text" name="attr_melee_name">
        <button type="roll" name="roll_melee_attack"
                value="@{character_name} uses their @{melee_name} against DN: ?{Target DN? |1|2|3|4|5|6}: [[(@{weapon_skill_attribute}+@{weapon_skill_1}+@{weapon_skill_2}+@{weapon_skill_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{weapon_skill_focus_1} + @{weapon_skill_focus_2} + @{weapon_skill_focus_3}]] focus points, and dealing @{melee_damage} extra damage"></button>
        <input type="number" disabled="true" name="attr_melee_pool"
               value="@{body} + @{weapon_skill_1} + @{weapon_skill_2} + @{weapon_skill_3}">
        <input type="number" name="attr_melee_focus" disabled="true"
               value="@{weapon_skill_focus_1} + @{weapon_skill_focus_2} + @{weapon_skill_focus_3}">
        <input type="number" name="attr_melee_damage" value="0">
        <input type="text" name="attr_traits">
    </div>
</fieldset>
<div>Ranged Weapons</div>
<fieldset class="repeating_ranged">
    <div class="sheet-weapons">
        <input type="text" name="attr_ranged_name"/>
        <button type="roll" name="roll_ranged_attack"
                value="@{character_name} uses their @{ranged_name} against DN: ?{Target DN? |1|2|3|4|5|6}: [[(@{ballistic_skill_attribute}+@{ballistic_skill_1}+@{ballistic_skill_2}+@{ballistic_skill_3})d6>?{Target DN? |1|2|3|4|5|6}]] successes with [[@{ballistic_skill_focus_1} + @{ballistic_skill_focus_2} + @{ballistic_skill_focus_3}]] focus points, and dealing @{ranged_damage} extra damage"></button>
        <input type="number" disabled="true" name="attr_ranged_pool"
               value="@{body} + @{ballistic_skill_1} + @{ballistic_skill_2} + @{ballistic_skill_3}"/>
        <input type="number" name="attr_ranged_focus" disabled="true"
               value="@{ballistic_skill_focus_1} + @{ballistic_skill_focus_2} + @{ballistic_skill_focus_3}"/>
        <input type="number" name="attr_ranged_damage" value="0"/>
        <input type="text" name="attr_traits"/>
    </div>
</fieldset>
<div>Spells & Miracles</div>
<div>Spells</div>
<div class="sheet-spells">
    <div>Name</div>
    <div>Cast</div>
    <div>DN</div>
    <div></div>
    <div></div><!--reserved for dn-->
    <div>Target</div>
    <div>Range</div>
    <div>Duration</div>
    <div>Test</div>
    <div>Effect</div>
</div>
<fieldset class="repeating_spells">
    <div class="sheet-spells">
        <input type="text" name="attr_spell_name"/>
        <button type="roll" name="roll_spell"
                value="@{character_name} casts @{spell_name} against DN @{spell_dn_target}:@{spell_dn_successes} gaining [[(@{mind} + @{channelling_1} + @{channelling_2} + @{channelling_3})d6>@{spell_dn_target}]] success with [[@{channelling_focus_1} + @{channelling_focus_2} + @{channelling_focus_3}]] focus points, with the effect: @{spell_effect}"></button>
        <input type="number" name="attr_spell_dn_target" class="sheet-no-spin sheet-small-digit">
        :
        <input type="number" name="attr_spell_dn_successes" class="sheet-no-spin sheet-small-digit">
        <input type="text" name="attr_spell_target" class="sheet-spells-target"/>
        <select name="attr_spell_range" class="sheet-spells-range">
            <option value="self">self</option>
            <option value="close">close</option>
            <option value="short">short</option>
            <option value="medium">medium</option>
            <option value="long">long</option>
        </select>
        <input type="text" name="attr_spell_duration" class="sheet-spells-duration"/>
        <input type="text" name="attr_spell_test" class="sheet-spells-test"/>
        <textarea type="text" name="attr_spell_effect" class="sheet-spells-effect"></textarea>
    </div>
</fieldset>
<div>miracles</div>
<div class="sheet-miracles">
    <div>Name</div>
    <div>Manifest</div>
    <div>Cost</div>
    <div>Target</div>
    <div>Range</div>
    <div>Duration</div>
    <div>Effect</div>
</div>
<fieldset class="repeating_miracles">
    <input type="text" name="attr_miracle_name"/>
    <button type="roll" name="roll_spell"
            value="@{character_name} manifests @{miracle_name} with the effect: @{miracle_effect}"></button>
    <input type="text" name="attr_miracle_cost" class="sheet-miracle-cost"/>
    <input type="text" name="attr_miracle_target" class="sheet-miracle-target"/>
    <select name="attr_miracle_range" class="sheet-miracle-range">
        <option value="self">self</option>
        <option value="close">close</option>
        <option value="short">short</option>
        <option value="medium">medium</option>
        <option value="long">long</option>
    </select>
    <input type="text" name="attr_miracle_duration" class="sheet-miracle-duration"/>
    <textarea name="attr_miracle_effect" class="sheet-miracle-effect"></textarea>
</fieldset>

<fieldset class="repeating_gear">
    <input type="text" name="attr_gear"/>
</fieldset>

<div>Equipment</div>
<div class="sheet-equipment">
    <div>Head</div>
    <input type="text" name="attr_equip_head"/>
    <div>Cloak</div>
    <input type="text" name="attr_equip_cloak"/>
    <div>Armour</div>
    <input type="text" name="attr_equip_armour"/>
    <div>Right Hand</div>
    <input type="text" name="attr_equip_r_hand"/>
    <div>Left Hand</div>
    <input type="text" name="attr_equip_l_hand"/>
    <div>Arms</div>
    <input type="text" name="attr_equip_arms"/>
    <div>Boots</div>
    <input type="text" name="attr_equip_boots"/>
    <div>Jewelry</div>
    <input type="text" name="attr_equip_jewelry"/>
</div>
<fieldset class="repeating_equipother">
    <div class="sheet-equipment">
        <div>Other</div>
        <input type="text" name="attr_equip_other"/>
    </div>
</fieldset>

<div>Background</div>
<textarea name="attr_background" class="sheet-fluff-info"></textarea>
<div>Notes</div>
<textarea name="attr_notes" class="sheet-fluff-info"></textarea>
<div>Goals</div>
<textarea name="attr_goals" class="sheet-fluff-info"></textarea>
<div>Connections</div>
<textarea name="attr_connections" class="sheet-fluff-info"></textarea>